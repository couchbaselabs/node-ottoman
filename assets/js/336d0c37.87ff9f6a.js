"use strict";(self.webpackChunkottoman_documentation=self.webpackChunkottoman_documentation||[]).push([[5134],{1570:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"api/classes/Model","title":"Class: Model\\\\<T, R\\\\>","description":"Defined in9","source":"@site/docs/api/classes/Model.md","sourceDirName":"api/classes","slug":"/api/classes/Model","permalink":"/docs/api/classes/Model","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"MixedType","permalink":"/docs/api/classes/MixedType"},"next":{"title":"MultipleQueryTypesException","permalink":"/docs/api/classes/MultipleQueryTypesException"}}');var r=s(4848),l=s(8453);const a={},c="Class: Model<T, R>",i={},o=[{value:"Example",id:"example",level:2},{value:"Extends",id:"extends",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"T",id:"t",level:3},{value:"R",id:"r",level:3},{value:"Accessors",id:"accessors",level:2},{value:"$isNew",id:"isnew",level:3},{value:"Get Signature",id:"get-signature",level:4},{value:"Example",id:"example-1",level:5},{value:"Returns",id:"returns",level:5},{value:"Inherited from",id:"inherited-from",level:4},{value:"Methods",id:"methods",level:2},{value:"_applyData()",id:"_applydata",level:3},{value:"Parameters",id:"parameters",level:4},{value:"data",id:"data",level:5},{value:"strategy",id:"strategy",level:5},{value:"Returns",id:"returns-1",level:4},{value:"Examples",id:"examples",level:4},{value:"Inherited from",id:"inherited-from-1",level:4},{value:"_depopulate()",id:"_depopulate",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"fieldsName",id:"fieldsname",level:5},{value:"Returns",id:"returns-2",level:4},{value:"Example",id:"example-2",level:4},{value:"Inherited from",id:"inherited-from-2",level:4},{value:"_getId()",id:"_getid",level:3},{value:"Returns",id:"returns-3",level:4},{value:"Example",id:"example-3",level:4},{value:"Inherited from",id:"inherited-from-3",level:4},{value:"_getIdField()",id:"_getidfield",level:3},{value:"Returns",id:"returns-4",level:4},{value:"Inherited from",id:"inherited-from-4",level:4},{value:"_populate()",id:"_populate",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"fieldsName?",id:"fieldsname-1",level:5},{value:"options?",id:"options",level:5},{value:"Returns",id:"returns-5",level:4},{value:"Example",id:"example-4",level:4},{value:"Inherited from",id:"inherited-from-5",level:4},{value:"_populated()",id:"_populated",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"fieldName",id:"fieldname",level:5},{value:"Returns",id:"returns-6",level:4},{value:"Example",id:"example-5",level:4},{value:"Inherited from",id:"inherited-from-6",level:4},{value:"_validate()",id:"_validate",level:3},{value:"Returns",id:"returns-7",level:4},{value:"Example",id:"example-6",level:4},{value:"Inherited from",id:"inherited-from-7",level:4},{value:"remove()",id:"remove",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"options",id:"options-1",level:5},{value:"Returns",id:"returns-8",level:4},{value:"Example",id:"example-7",level:4},{value:"Inherited from",id:"inherited-from-8",level:4},{value:"save()",id:"save",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"onlyCreate",id:"onlycreate",level:5},{value:"options",id:"options-2",level:5},{value:"Returns",id:"returns-9",level:4},{value:"Example",id:"example-8",level:4},{value:"Inherited from",id:"inherited-from-9",level:4},{value:"toJSON()",id:"tojson",level:3},{value:"Returns",id:"returns-10",level:4},{value:"Inherited from",id:"inherited-from-10",level:4},{value:"toObject()",id:"toobject",level:3},{value:"Returns",id:"returns-11",level:4},{value:"Inherited from",id:"inherited-from-11",level:4}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"class-modelt-r",children:"Class: Model<T, R>"})}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/model.ts#L9",children:"model/model.ts:9"})]}),"\n",(0,r.jsx)(n.p,{children:"Document class represents a database document and provides useful methods to work with."}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'import { connect, model } from "ottoman";\nconnect("couchbase://localhost/travel-sample@admin:password");\n\n// Create an `User` model\nconst User = model(\'User\', { name: String });\n\n// Create a document from the `User` Model\nconst jane = new User({ name: "Jane Doe" })\n'})}),"\n",(0,r.jsx)(n.h2,{id:"extends",children:"Extends"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,r.jsx)(n.h3,{id:"t",children:"T"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"T"})," = ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsx)(n.h3,{id:"r",children:"R"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"R"})," = ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsx)(n.h2,{id:"accessors",children:"Accessors"}),"\n",(0,r.jsx)(n.h3,{id:"isnew",children:"$isNew"}),"\n",(0,r.jsx)(n.h4,{id:"get-signature",children:"Get Signature"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"get"})," ",(0,r.jsx)(n.strong,{children:"$isNew"}),"(): ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L615",children:"model/document.ts:615"})]}),"\n",(0,r.jsx)(n.p,{children:"Boolean flag specifying if the document is new."}),"\n",(0,r.jsx)(n.h5,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const CardSchema = new Schema({\n  cardNumber: { type: String, immutable: true },\n  zipCode: String,\n});\n\n// Create model\nconst Card = model('Card', CardSchema);\n\n// Create document\nconst myCard = new Card({ cardNumber: '4321 4321 4321 4321', zipCode: '43210' });\nmyCard.$isNew; // true\n\n// Save document\nconst myCardSaved = await myCard.save();\nmyCardSaved.$isNew; // false\n"})}),"\n",(0,r.jsx)(n.h5,{id:"returns",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#isnew",children:(0,r.jsx)(n.code,{children:"$isNew"})})]}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"_applydata",children:"_applyData()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_applyData"}),"(",(0,r.jsx)(n.code,{children:"data"}),", ",(0,r.jsx)(n.code,{children:"strategy"}),"): ",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L524",children:"model/document.ts:524"})]}),"\n",(0,r.jsx)(n.p,{children:"Allows to easily apply data from an object to current document."}),"\n",(0,r.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"data",children:"data"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"any"})}),"\n",(0,r.jsx)(n.h5,{id:"strategy",children:"strategy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ApplyStrategy"})," = ",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'const user = new User({ name: "John Doe" });\n\nuser._applyData({ name: "Jane Doe" });\nconsole.log(user) // { name: "Jane Doe" }\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const User = model('Card', { name: { type: String, immutable: true } });\nconst user = new User({ name: 'John Doe' });\n\n // with strategy:false is like above example\n user._applyData({ name: 'Jane Doe' }, false);\n console.log(user); // { name: \"Jane Doe\" }\n\n // with strategy:true remains immutable\n user._applyData({ name: 'Jane Doe' }, true);\n console.log(user); // { name: \"John Doe\" }\n\n // trying to update it directly\n user.name = 'Jane Doe';\n console.log(user); // { name: \"John Doe\" }\n\n // with strategy:CAST_STRATEGY.THROW\n user._applyData({ name: 'Jane Doe' }, CAST_STRATEGY.THROW);\n // ImmutableError: Field 'name' is immutable and current cast strategy is set to 'throw'\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-1",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_applydata",children:(0,r.jsx)(n.code,{children:"_applyData"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_depopulate",children:"_depopulate()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_depopulate"}),"(",(0,r.jsx)(n.code,{children:"fieldsName"}),"): ",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L440",children:"model/document.ts:440"})]}),"\n",(0,r.jsx)(n.p,{children:"Reverts population. Switches back document reference."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"fieldsname",children:"fieldsName"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"})," | ",(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.h4,{id:"returns-2",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"example-2",children:"Example"}),"\n",(0,r.jsxs)(n.p,{children:["To get in context about the Card and Issue Models ",(0,r.jsx)(n.a,{href:"/docs/api/classes/document.html",children:"see the populate example."}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const card = await Card.findById(cardId);\nconsole.log(card.issues); // ['issueId']\n\nawait card._populate('issues')\nconsole.log(card.issues); // [{ id: 'issueId', title: 'Broken card' }]\n\ncard._depopulate('issues')\nconsole.log(card.issues); // ['issueId']\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-2",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_depopulate",children:(0,r.jsx)(n.code,{children:"_depopulate"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_getid",children:"_getId()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_getId"}),"(): ",(0,r.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L124",children:"model/document.ts:124"})]}),"\n",(0,r.jsx)(n.p,{children:"Returns id value, useful when working with dynamic ID_KEY."}),"\n",(0,r.jsx)(n.h4,{id:"returns-3",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.h4,{id:"example-3",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"  console.log(user._getId()); // 'userId'\n  console.log(user.id); // 'userId'\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-3",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_getid",children:(0,r.jsx)(n.code,{children:"_getId"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_getidfield",children:"_getIdField()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_getIdField"}),"(): ",(0,r.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L131",children:"model/document.ts:131"})]}),"\n",(0,r.jsx)(n.p,{children:"Returns id key."}),"\n",(0,r.jsx)(n.h4,{id:"returns-4",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-4",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_getidfield",children:(0,r.jsx)(n.code,{children:"_getIdField"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_populate",children:"_populate()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_populate"}),"(",(0,r.jsx)(n.code,{children:"fieldsName?"}),", ",(0,r.jsx)(n.code,{children:"options?"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">>"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L418",children:"model/document.ts:418"})]}),"\n",(0,r.jsx)(n.p,{children:"Allows to load document references."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"fieldsname-1",children:"fieldsName?"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"PopulateFieldsType"})}),"\n",(0,r.jsx)(n.h5,{id:"options",children:"options?"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"PopulateOptionsType"})}),"\n",(0,r.jsx)(n.h4,{id:"returns-5",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">>"]}),"\n",(0,r.jsx)(n.h4,{id:"example-4",children:"Example"}),"\n",(0,r.jsx)(n.p,{children:"Getting context to explain populate."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Defining the schemas\nconst addressSchema = new Schema({\n  address: String,\n});\nconst personSchema = new Schema({\n  name: String,\n  age: Number,\n  address: { type: addressSchema, ref: 'Address' },\n});\nconst companySchema = new Schema({\n  president: { type: personSchema, ref: 'Person' },\n  ceo: { type: personSchema, ref: 'Person' },\n  name: String,\n  workers: [{ type: personSchema, ref: 'Person' }],\n});\n\n// Initializing the models\nconst Address = model('Address', addressSchema);\nconst Person = model('Person', personSchema);\nconst Company = model('Company', companySchema);\n\n// Adding some data\nconst johnAddress = await Address.create({ address: '13 Washington Square S, New York, NY 10012, USA' });\nconst john = await Person.create({ name: 'John Smith', age: 52, address: johnAddress });\n\nconst janeAddress = await Address.create({ address: '55 Clark St, Brooklyn, NY 11201, USA' });\nconst jane = await Person.create({ name: 'Jane Doe', age: 45, address: janeAddress });\n\nconst company = await Company.create({ name: 'Space X', president: john, ceo: jane });\n\n// Getting saved company data\nconst spaceX = await Company.findById(company.id);\nconsole.log(`Company: `, company);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Will get:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Company: {\n    name: 'Space X',\n    president: '50e85ac9-5b4f-4587-aeb6-b287527794c9',\n    ceo: '32c2e85a-cc91-4db2-935f-f7d2768168de',\n    id: 'd59efbdf-4b7e-4d2f-a986-6e8451f22822',\n    _type: 'Company'\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now we will see how the _populate methods works."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await spaceX._populate('ceo');\nconsole.log(`Result: `, result);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Result: {\n  name: 'Space X',\n  president: '50e85ac9-5b4f-4587-aeb6-b287527794c9',\n  ceo: {\n    name: 'Jane Doe',\n    age: 45,\n    address: '235dd441-b445-4b88-b6aa-2ce35a958a32',\n    id: '32c2e85a-cc91-4db2-935f-f7d2768168de',\n    _type: 'Person'\n  },\n  id: 'd59efbdf-4b7e-4d2f-a986-6e8451f22822',\n  _type: 'Company'\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Can also pass an array or a string separated by a comma"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await spaceX._populate('ceo,president');\n// or\nconst result = await spaceX._populate(['ceo', 'president']);\nconsole.log(`Result: `, result);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Result: {\n  name: 'Space X',\n  president: {\n    name: 'John Smith',\n    age: 52,\n    address: 'bc7ea8a8-8d1c-4ab6-990c-d3a0163f7e10',\n    id: '50e85ac9-5b4f-4587-aeb6-b287527794c9',\n    _type: 'Person'\n  },\n  ceo: {\n    name: 'Jane Doe',\n    age: 45,\n    address: '235dd441-b445-4b88-b6aa-2ce35a958a32',\n    id: '32c2e85a-cc91-4db2-935f-f7d2768168de',\n    _type: 'Person'\n  },\n  id: 'd59efbdf-4b7e-4d2f-a986-6e8451f22822',\n  _type: 'Company'\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you want to get only a portion of the object"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await spaceX._populate({\n  ceo: ['age', 'address'], // or 'age,addres'\n  president: 'name',\n});\nconsole.log(`Result: `, result);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Result: {\n  name: 'Space X',\n  president: { name: 'John Smith' },\n  ceo: { age: 45, address: '235dd441-b445-4b88-b6aa-2ce35a958a32' },\n  id: 'd59efbdf-4b7e-4d2f-a986-6e8451f22822',\n  _type: 'Company'\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now let's to go deeper"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await spaceX._populate(\n  {\n    ceo: {\n      select: 'age,id', // remember you can use ['age','address']\n      populate: 'address', // will populate all the fields\n    },\n    president: {\n      select: 'name',\n      populate: {\n        address: 'address', // will populate address field only\n      },\n    },\n  },\n  2, // for populate up to the second level\n);\nconsole.log(`Result: `, result);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Result: {\n  name: 'Space X',\n  president: {\n    name: 'John Smith',\n    address: { address: '13 Washington Square S, New York, NY 10012, USA' }\n  },\n  ceo: {\n    age: 45,\n    id: '32c2e85a-cc91-4db2-935f-f7d2768168de',\n    address: {\n      address: '55 Clark St, Brooklyn, NY 11201, USA',\n      id: '235dd441-b445-4b88-b6aa-2ce35a958a32',\n      _type: 'Address'\n    }\n  },\n  id: 'd59efbdf-4b7e-4d2f-a986-6e8451f22822',\n  _type: 'Company'\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Below is another way through the find functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await Company.findOne(\n  { name: 'Space X' },\n  {\n    select: 'president,ceo',\n    populate: {\n      president: { select: 'address,id', populate: 'address' },\n      ceo: { select: ['age', 'name'], populate: { address: { select: 'id' } } },\n    },\n    populateMaxDeep: 2,\n  },\n);\nconsole.log(`Result: `, result);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Result: {\n  ceo: {\n    age: 45,\n    name: 'Jane Doe',\n    address: { id: '235dd441-b445-4b88-b6aa-2ce35a958a32' }\n  },\n  president: {\n    address: {\n      address: '13 Washington Square S, New York, NY 10012, USA',\n      id: 'bc7ea8a8-8d1c-4ab6-990c-d3a0163f7e10',\n      _type: 'Address'\n    },\n    id: '50e85ac9-5b4f-4587-aeb6-b287527794c9'\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-5",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_populate",children:(0,r.jsx)(n.code,{children:"_populate"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_populated",children:"_populated()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_populated"}),"(",(0,r.jsx)(n.code,{children:"fieldName"}),"): ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L480",children:"model/document.ts:480"})]}),"\n",(0,r.jsx)(n.p,{children:"Allows to know if a document field is populated."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"fieldname",children:"fieldName"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.h4,{id:"returns-6",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.h4,{id:"example-5",children:"Example"}),"\n",(0,r.jsxs)(n.p,{children:["To get in context about the Card and Issue Models ",(0,r.jsx)(n.a,{href:"/docs/api/classes/document.html",children:"see the populate example."}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const card = await Card.findById(cardId);\nconsole.log(card.issues); // ['issueId']\nconsole.log(card._populated('issues')); // false\n\nawait card._populate('issues')\nconsole.log(card.issues); // [{ id: 'issueId', title: 'Broken card' }]\nconsole.log(card._populated('issues')); // true\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-6",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_populated",children:(0,r.jsx)(n.code,{children:"_populated"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"_validate",children:"_validate()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"_validate"}),"(): ",(0,r.jsx)(n.code,{children:"any"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L568",children:"model/document.ts:568"})]}),"\n",(0,r.jsx)(n.p,{children:"Runs schema validations over current document."}),"\n",(0,r.jsx)(n.h4,{id:"returns-7",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"any"})}),"\n",(0,r.jsx)(n.h4,{id:"example-6",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'const user = new User( { name: "John Doe" } );\n\ntry {\n  await user._validate()\n} catch(errors) {\n  console.log(errors)\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-7",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#_validate",children:(0,r.jsx)(n.code,{children:"_validate"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"remove",children:"remove()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"remove"}),"(",(0,r.jsx)(n.code,{children:"options"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"any"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L208",children:"model/document.ts:208"})]}),"\n",(0,r.jsx)(n.p,{children:"Removes the document from the database."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"options-1",children:"options"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"removeOptions"})," = ",(0,r.jsx)(n.code,{children:"{}"})]}),"\n",(0,r.jsx)(n.h4,{id:"returns-8",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"any"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"example-7",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const user = User.findById('userId')\n\nawait user.remove();\n"})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-8",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#remove",children:(0,r.jsx)(n.code,{children:"remove"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"save",children:"save()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"save"}),"(",(0,r.jsx)(n.code,{children:"onlyCreate"}),", ",(0,r.jsx)(n.code,{children:"options"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"any"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L148",children:"model/document.ts:148"})]}),"\n",(0,r.jsx)(n.p,{children:"Saves or Updates the document."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"onlycreate",children:"onlyCreate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"boolean"})," = ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsx)(n.h5,{id:"options-2",children:"options"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/interfaces/saveOptions",children:(0,r.jsx)(n.code,{children:"saveOptions"})})," = ",(0,r.jsx)(n.code,{children:"{}"})]}),"\n",(0,r.jsx)(n.h4,{id:"returns-9",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"any"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"example-8",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'const user = new User({ name: "John Doe" }); //user document created, it\'s not saved yet\n\nawait user.save(); // user saved into the DB\n\n// You also can force save function to only create new Documents by passing true as argument\nawait user.save(true); // ensure to execute a insert operation\n'})}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-9",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#save",children:(0,r.jsx)(n.code,{children:"save"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"tojson",children:"toJSON()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"toJSON"}),"(): ",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L582",children:"model/document.ts:582"})]}),"\n",(0,r.jsx)(n.p,{children:"Returns a Javascript object to be serialized to JSON"}),"\n",(0,r.jsx)(n.h4,{id:"returns-10",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-10",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#tojson",children:(0,r.jsx)(n.code,{children:"toJSON"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"toobject",children:"toObject()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"toObject"}),"(): ",(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/couchbaselabs/node-ottoman/blob/e4a91a4bdf06c956786a77fdc585b371d9e9cba4/src/model/document.ts#L575",children:"model/document.ts:575"})]}),"\n",(0,r.jsx)(n.p,{children:"Returns a Javascript object with data"}),"\n",(0,r.jsx)(n.h4,{id:"returns-11",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Model"}),"<",(0,r.jsx)(n.code,{children:"T"}),", ",(0,r.jsx)(n.code,{children:"R"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"inherited-from-11",children:"Inherited from"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/api/classes/Document",children:(0,r.jsx)(n.code,{children:"Document"})}),".",(0,r.jsx)(n.a,{href:"/docs/api/classes/Document#toobject",children:(0,r.jsx)(n.code,{children:"toObject"})})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var d=s(6540);const r={},l=d.createContext(r);function a(e){const n=d.useContext(l);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),d.createElement(l.Provider,{value:n},e.children)}}}]);